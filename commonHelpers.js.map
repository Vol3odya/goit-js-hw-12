{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function gallery(arr, page=1) {\n    let code = '';\n    arr.forEach(elm => {\n        code += `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${elm.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${elm.webformatURL}\" alt=\"${elm.tags}\"/>\n            </a>\n            <ul class=\"gallery-ul\">\n                <li class=\"gallery-li\">\n                    <h3 class=\"gallery-title\">Likes</h3>\n                    <p class=\"gallery-par\">${elm.likes}</p>\n                </li>\n                <li class=\"gallery-li\">\n                    <h3 class=\"gallery-title\">Views</h3>\n                    <p class=\"gallery-par\">${elm.views}</p>\n                </li>\n                <li class=\"gallery-li\">\n                    <h3 class=\"gallery-title\">Comments</h3>\n                    <p class=\"gallery-par\">${elm.comments}</p>\n                </li>\n                <li class=\"gallery-li\">\n                    <h3 class=\"gallery-title\">Downloads</h3>\n                    <p class=\"gallery-par\">${elm.downloads}</p>\n                </li>\n            </ul>\n        </li>`;\n    });\n    const ul = document.querySelector('.gallery');\n    ul.insertAdjacentHTML(\"beforeend\", code);\n    const lightbox = new SimpleLightbox('.gallery a', { captionDelay: 250, captionPosition: 'bottom', captionsData: \"alt\" });\n    if (page > 1) {\n        const image = document.querySelector('.gallery-image');\n        const y = 2 * image.getBoundingClientRect().height;\n        window.scrollBy({\n            top: y,\n            left: 0,\n            behavior: 'smooth'\n        })\n    }\n}\nexport function zagruzka() {\n    buttonRemove();\n    const ul = document.querySelector('.div-js');\n    ul.insertAdjacentHTML(\"afterbegin\", '<div class=\"loader\"></div>');\n}\nexport function buttonShow() {\n    const button = document.querySelector('.buttontwo');\n    button.disabled = false;\n    button.classList.remove('is-hidden');\n}\nfunction buttonRemove() {\n    const button = document.querySelector('.buttontwo');\n    button.disabled = false;\n    button.classList.add('is-hidden');\n}\nexport function deleteContent(elm) {\n    const ul = document.querySelector(elm);\n    ul.textContent = '';\n    new SimpleLightbox('.gallery a', { captionDelay: 250, captionPosition: 'bottom', captionsData: \"alt\" }).refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport function getPictures({ q = '', page = 1, pageSize = 15 } = {}) {\n    return axios.get('api/', {\n        params: {\n            key: '44929764-df5ad93c9d917838a072df550',\n            q,\n            page,\n            per_page: pageSize,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true'\n        },\n    }).then(({ data }) => data);\n}\n\n","import { zagruzka } from \"./js/render-functions\";\nimport { buttonShow } from \"./js/render-functions\";\nimport { deleteContent } from \"./js/render-functions\";\nimport { gallery } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getPictures } from \"./js/pixabay-api\";\n\nconst params = {\n    q: '',\n    page: 1,\n    pageSize: 15,\n    maxPage: 0,\n};\nconst form = document.querySelector('form');\nform.addEventListener('submit', submit);\nfunction submit(evt) {\n    evt.preventDefault();\n\n    deleteContent('.gallery');\n    if (evt.target.elements.text.value.trim() === '') {\n        iziToast.show({\n            color: '#ef4040',\n            position: 'topRight',\n            title: 'Error',\n            message: 'Sorry, please enter the correct value!'\n        })\n        return;\n    }\n    zagruzka();\n    params.q = evt.target.elements.text.value.trim();\n    params.page = 1;\n    try {\n        masPictures(params).then((res) => { gallery(res, params.page) }).catch((err) => { deleteContent('.div-js'); console.error(err) });\n    } catch (err) {\n        iziToast.show({\n            color: '#ef4040',\n            position: 'topRight',\n            title: 'Error',\n            message: err\n        })\n    }\n}\nconst buttonClick = document.querySelector('.buttontwo');\nbuttonClick.disabled = true;\nbuttonClick.addEventListener('click', click);\nfunction click() {\n    zagruzka();\n    params.page += 1;\n     try {\n        masPictures(params).then((res) => { gallery(res, params.page) }).catch((err) => { deleteContent('.div-js'); console.error(err) });\n    } catch (err) {\n        iziToast.show({\n            color: '#ef4040',\n            position: 'topRight',\n            title: 'Error',\n            message: err\n        })\n    }\n}\nasync function masPictures(search) {\n    return await getPictures(search).then(data => {\n        const arr = data.hits.map((rez) => {\n            const qaz = { webformatURL: rez.webformatURL, largeImageURL: rez.largeImageURL, tags: rez.tags, likes: rez.likes, views: rez.views, comments: rez.comments, downloads: rez.downloads, };\n            return qaz;\n        });\n        params.maxPage = Math.ceil(data.total / params.pageSize);\n        deleteContent('.div-js');\n        if (params.page < params.maxPage) {\n            buttonShow(); \n        }\n        if (data.hits[0] == undefined) {\n            throw new Error('No images found');\n        }\n        return arr;\n    }).catch((err) => iziToast.show({\n                    color: '#ef4040',\n                    position: 'topRight',\n                    title: 'Error',\n                    message: 'No images found'\n                }))\n}"],"names":["gallery","arr","page","code","elm","SimpleLightbox","y","zagruzka","buttonRemove","buttonShow","button","deleteContent","ul","getPictures","q","pageSize","data","params","form","submit","evt","iziToast","masPictures","res","err","buttonClick","click","search","rez"],"mappings":"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"}